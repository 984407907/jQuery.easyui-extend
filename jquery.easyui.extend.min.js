/**
 * Licensed under the GPL licenses
 * http://www.gnu.org/licenses/gpl.txt
 *
 * @author: 爱看书不识字<zjh527@163.com>
 * https://github.com/loafer/jQuery.easyui-extend
 * http://blog.csdn.net/zjh527
 */
(function(c){function a(h){var j=c.extend(true,{},c.fn.combobox.defaults,c(h).combobox("options"));var f=j.customAttr.slave;if(f.id==null){return}if(/^#/.test(f.id)){f.id=f.id}else{f.id="#"+f.id}if(!j.multiple&&!j.editable){var g=j.onSelect;c(h).combobox({onSelect:function(k){g.call(h,k);b(h,f,k)}});var e=j.onChange;c(h).combo({onChange:function(l,k){e.call(h,l,k);if(l==null||l==""){c(f.id).combobox("clear").combobox("loadData",[]);c(h).combo("textbox").trigger("blur")}}})}}function b(g,h,e){if(h.remote){var f=h.url||c(h.id).combobox("options").url;if(f.indexOf("?")>-1){f+="&swd="+c(g).combobox("getValue")}else{f+="?swd="+c(g).combobox("getValue")}c(h.id).combobox("reload",f)}else{c(h.id).combobox("loadData",e.data)}}function d(f){var g=c(f).combobox("options");var e=c.extend(true,{},c.fn.combobox.defaults,g);if(!e.customAttr.headervalue){return}var h=g.onLoadSuccess;c(f).combobox({onLoadSuccess:function(){h.call(f);c(f).combo("textbox").trigger("blur")}})}c.fn.combobox.defaults.customAttr={slave:{id:null,remote:true,url:null}};c.extend(c.fn.combobox.methods,{followCustomHandle:function(e){return e.each(function(){c(this).combo("followCustomHandle");d(this);a(this)})}})})(jQuery);(function(e){function c(j){var k=e.data(j,"combo").options;var h=e.extend(true,{},e.fn.combo.defaults,k);if(!h.customAttr.headervalue){return}if(k.required){var g=['unequal["'+h.customAttr.headervalue+'"]'];if(k.validType){if(typeof k.validType=="string"){g.push(k.validType);k.validType=g}if(e.isArray(k.validType)){e.merge(k.validType,g)}}else{e.extend(k,{validType:g})}}var f=k.onChange;e(j).combo({onChange:function(m,l){if(m==null||m==""){e(j).combo("setText",h.customAttr.headervalue)}f.call(j,m,l)}}).combo("textbox").val(h.customAttr.headervalue).attr("prompt",h.customAttr.headervalue).focus(function(){if(e(this).val()==h.customAttr.headervalue){e(this).val("")}}).blur(function(){if(e.trim(e(this).val())==""){e(this).val(h.customAttr.headervalue)}e(j).combo("validate")})}function a(g){var f=e.data(g,"combo").options;e(g).combo("setText","");if(f.multiple){e(g).combo("setValues",[])}else{e(g).combo("setValue","")}}function b(g){var f=e(g).combo("getValues");return f.length>0?(f[0]!=""?f[0]:null):null}function d(g){var h=e.extend(true,{},e.fn.combo.defaults,e.data(g,"combo").options);var f=h.customAttr.autocomplete;if(!f.enabled){return}e(g).combo("textbox").keypress(function(j){if(e(this).val().length!=0&&e(this).val().length%f.minLength==0&&f.url){e.ajax({type:"POST",url:f.url,data:{wd:e(this).val()},dataType:"json",success:function(m){var l=e(g).combo("panel").empty();for(var k=0;k<m.length;k++){e("<div>").addClass("combobox-item").attr("value",m[k].value).text(m[k].text).click(function(p){var n=e(this).attr("value");var o=e(this).text();e(g).combo("setValue",n).combo("setText",o).combo("hidePanel")}).hover(function(){e(this).addClass("combobox-item-hover")},function(){e(this).removeClass("combobox-item-hover")}).appendTo(l)}},error:function(k,m,l){e.messager.alert("Error",l,"error")}})}})}e.fn.combo.defaults.customAttr={headervalue:null,autocomplete:{enabled:false,minLength:3,url:undefined}};e.extend(e.fn.combo.methods,{followCustomHandle:function(f){return f.each(function(){c(this);d(this)})},clear:function(f){return f.each(function(){a(this)})},getValue:function(f){return b(f[0])}})})(jQuery);(function(c){function f(p,q,m){var o=d(p,m);var n=c("#"+o);if(n.length==0){n=c("<div>",{id:o}).menu().menu("appendItems",q)}return n}function d(n,m){return c(n).attr("id")+"_"+m}function j(n){var m={};c.each(n,function(){var p=this;if(p.onclick){var o=p.id||p.text;m[o]=p.onclick;delete p.onclick}if(p.submenu&&c.isArray(p.submenu)&&p.submenu.length>0){c.extend(m,j(p.submenu))}});return m}function e(t,p){var o=p||[];if(!c.isArray(o)){o=[]}var s=d(t,"headerContextMenu");var m=[{text:"显示/隐藏列",iconCls:"icon-columns",submenu:[{id:s+"_showAll",text:"全部显示",iconCls:"icon-columns",onclick:function(v,w,u){c.fn.datagrid.headerContextMenu.defaults.events.doShowAll(u)}},{id:s+"_restore",text:"还原",iconCls:"icon-columns",onclick:function(v,w,u){c.fn.datagrid.headerContextMenu.defaults.events.doRestore(u)}},"-"]}];c.merge(m,p);var n=function(u){return u.substr(u.lastIndexOf("_")+1,u.length)};var q=[];var r=c(t).datagrid("getColumnFields");c.each(r,function(v,w){if(!w){return true}var u=c(t).datagrid("getColumnOption",w);u._hidden=u.hidden;q.push({id:s+"_"+w,text:u.title,iconCls:u.hidden?"icon-unchecked":"icon-checked",onclick:function(y,x,B){var A=n(y.id);var z=c(B).datagrid("getColumnOption",A).hidden;if(!z){c.fn.datagrid.headerContextMenu.defaults.events.doHideColumn(B,A,y)}else{c.fn.datagrid.headerContextMenu.defaults.events.doShowColumn(B,A,y)}}})});c.merge(m[0].submenu,q);return m}function h(q,o){var s=o.customAttr.headerContextMenu;if(!s.isShow){return}var r=[];if(s.isMerge){r=e(q,s.items)}else{r=c.isArray(s.items)?s.items:[]}var p=j(r);var n=o.onHeaderContextMenu;var m=f(q,r,"headerContextMenu");c(q).datagrid({onHeaderContextMenu:function(u,t){u.preventDefault();m.menu({onClick:function(w){var v=w.id||w.text;if(p[v]){p[v].call(this,w,t,q)}}}).menu("show",{left:u.pageX,top:u.pageY});n.call(this,u,t)}})}function a(q,o){var n=o||[];if(!c.isArray(n)){n=[]}var p=d(q,"rowContextMenu");var m=[{id:p+"_add",text:"增加",iconCls:"icon-add",onclick:function(){}},{id:p+"_edit",text:"编辑",iconCls:"icon-edit",onclick:function(){}},{id:p+"_delete",text:"删除",iconCls:"icon-remove",onclick:function(s,v,u,r){c.messager.confirm("疑问","您确定要删除已选中的行？",function(t){if(t){c(r).datagrid("deleteRows",c(r).datagrid("getSelections"))}})}},"-",{id:p+"_reload",text:"刷新",iconCls:"icon-reload",onclick:function(s,v,u,r){c(r).datagrid("load")}},{id:p+"_reload_this_page",text:"刷新当前页",onclick:function(s,v,u,r){c(r).datagrid("reload")}},"-",{text:"导出",iconCls:"icon-table-export",submenu:[{id:p+"_export_this_page",text:"本页",iconCls:"icon-export-excel",onclick:function(){}},{id:p+"_export_all",text:"全部",iconCls:"icon-table-excel",onclick:function(){}}]}];c.merge(m,o);return m}function l(r,n){var o=n.customAttr.rowContextMenu;if(!o.isShow){return}var s=[];if(o.isMerge){s=a(r,o.items)}else{s=c.isArray(o.items)?o.items:[]}var q=j(s);var p=n.onRowContextMenu;var m=f(r,s,"rowContextMenu");c(r).datagrid({onRowContextMenu:function(u,v,t){u.preventDefault();m.menu({onClick:function(x){var w=x.id||x.text;if(q[w]){q[w].call(this,x,v,t,r)}}}).menu("show",{left:u.pageX,top:u.pageY});p.call(this,u,v,t)}})}function k(s,u){if(!c.isArray(u.customAttr.slaveList)){return}if(u.customAttr.slaveList.length==0){return}var t={slaveList:u.customAttr.slaveList,activeSlave:u.customAttr.activeSlave};var o=c(s);var n=[];for(var r in t.slaveList){var p={id:t.slaveList[r].id,params:{}};var q={},m;if(!t.slaveList[r].relatedfield){m=o.datagrid("options").idField;q[m]="undefined"}else{m=t.slaveList[r].relatedfield;q[t.slaveList[r].relatedfield]="undefined"}c.extend(p.params,q,t.slaveList[r].queryParams);n.push(p)}if(t.activeSlave==c.fn.datagrid.defaults.customAttr.activeSlave){o.datagrid({onDblClickRow:function(x,w){for(var v in n){n[v].params[m]=w[m];c("#"+n[v].id).datagrid("load",n[v].params)}}})}}function b(q,v){if(!v.customAttr.rowediting){return}var o=function(w){return c(w).attr("id")+"_editor_buttons_panel"};var t=function(A){var z=o(A);if(c("#"+z).length>0){return}var x=c(A).datagrid("getPanel");var y=c(">div.datagrid-view>div.datagrid-view2>div.datagrid-body",x);y.css("position","relative");var w=c("<div>",{id:z}).addClass("dialog-button").appendTo(y).css({position:"absolute",display:"block","border-bottom":"1px solid #ddd","border-left":"1px solid #ddd","border-right":"1px solid #ddd",left:parseInt(x.width()/2)-120,"z-index":2013,display:"none",padding:"4px 5px"});c('<a href="javascript:void(0)">确定</a>').css("margin-left","0px").linkbutton({iconCls:"icon-ok"}).click(function(){var B=c(A).datagrid("getRowIndex",c(A).datagrid("getEditingRow"));c(A).datagrid("endEdit",B)}).appendTo(w);c('<a href="javascript:void(0)">取消</a>').css("margin-left","6px").linkbutton({iconCls:"icon-cancel"}).click(function(){var B=c(A).datagrid("getRowIndex",c(A).datagrid("getEditingRow"));c(A).datagrid("cancelEdit",B)}).appendTo(w)};var n=function(D,B){var w=c.data(D,"datagrid").options;var E=w.finder.getTr(D,B);var z=E.position();var C=function(){var G=E.width()*2+10;var F=z.top+A.scrollTop();if((z.top+G)>A.height()){return{top:F-G}}else{return{top:F}}};var y="#"+o(D);var x=c(D).datagrid("getPanel");var A=c(">div.datagrid-view>div.datagrid-view2>div.datagrid-body",x);c(y).css({top:C().top}).show()};var p=function(x){var w="#"+o(x);c(w).hide()};var r=v.onLoadSuccess;var u=v.onBeforeEdit;var s=v.onAfterEdit;var m=v.onCancelEdit;c(q).datagrid({onLoadSuccess:function(w){r.call(this,w);t(this)},onBeforeEdit:function(w,x){n(q,w);u.call(this,w,x)},onAfterEdit:function(w,y,x){p(q);s.call(this,w,y,x)},onCancelEdit:function(w,x){p(q);m.call(this,w,x)}})}function g(o,n){if(!n.customAttr.tooltip.enable){return}var s=function(u,t){c(u).tooltip({content:t,position:n.customAttr.tooltip.position,trackMouse:true,onHide:function(){c(u).tooltip("destroy")}}).tooltip("show")};var r=function(x,u){var y=parseInt(x.attr("datagrid-row-index"));var w=c(o).datagrid("getRows")[y];var t=function(B){var A=[];var z=c.grep(c.merge(c(o).datagrid("getColumnFields",true),c(o).datagrid("getColumnFields")),function(D,C){return c.trim(D).length>0});c.each(z,function(){var C=this;var D=c(o).datagrid("getColumnOption",C).title;A.push(D+": "+B[C])});return A.join("<br>")};var v=u?u(null,w,y):t(w);x.mouseover(function(){s(this,v)})};var m=function(t,u){t.mouseover(function(){var y=c(this).parent().attr("datagrid-row-index");var x=c(o).datagrid("getRows")[y];var w=x[c(this).attr("field")];var v=u?u(w,x,y):w;s(this,v)})};var q=function(){if(n.customAttr.tooltip.target=="row"){n.finder.getTr(o,"","allbody").each(function(){var v=c(this);if(v.hasClass("datagrid-row")){r(v,n.customAttr.tooltip.formatter)}})}else{if(n.customAttr.tooltip.fields&&c.isArray(n.customAttr.tooltip.fields)){var t=c(o).datagrid("getPanel");var u=c(">div.datagrid-view>div.datagrid-view2>div.datagrid-body",t);c.each(n.customAttr.tooltip.fields,function(){var v=this;m(c("td[field="+v+"]",u),n.customAttr.tooltip.formatter)})}}};var p=n.onLoadSuccess;c(o).datagrid({onLoadSuccess:function(t){p.call(this,arguments);q()}})}c.fn.datagrid.headerContextMenu={};c.fn.datagrid.headerContextMenu.defaults={};c.fn.datagrid.headerContextMenu.defaults.events={doHideColumn:function(o,n,m){c(o).datagrid("hideColumn",n);var p=c(o).datagrid("getHeaderContextMenu");p.menu("setIcon",{target:m.target,iconCls:"icon-unchecked"})},doShowColumn:function(o,n,m){c(o).datagrid("showColumn",n);var p=c(o).datagrid("getHeaderContextMenu");p.menu("setIcon",{target:m.target,iconCls:"icon-checked"})},doShowAll:function(p){var m=c(p).datagrid("getColumnFields");var q=c(p).datagrid("getHeaderContextMenu");for(i in m){c(p).datagrid("showColumn",m[i]);var n=c(p).datagrid("getColumnOption",m[i]);var o=q.menu("findItem",n.title);q.menu("setIcon",{target:o.target,iconCls:"icon-checked"})}},doRestore:function(p){var m=c(p).datagrid("getColumnFields");var q=c(p).datagrid("getHeaderContextMenu");for(i in m){var n=c(p).datagrid("getColumnOption",m[i]);var o=q.menu("findItem",n.title);if(!n._hidden){c(p).datagrid("showColumn",m[i]);q.menu("setIcon",{target:o.target,iconCls:"icon-checked"})}else{c(p).datagrid("hideColumn",m[i]);q.menu("setIcon",{target:o.target,iconCls:"icon-unchecked"})}}}};c.extend(c.fn.datagrid.defaults.editors,{my97:{init:function(m,o){var n=c('<input type="text" class="Wdate">').appendTo(m);o=o||{};o=c.extend({},o,{readOnly:true});return n.focus(function(){WdatePicker()})},getValue:function(m){return c(m).val()},setValue:function(n,m){c(n).val(m)},resize:function(o,n){var m=c(o);if(c.boxModel==true){m.width(n-(m.outerWidth()-m.width()))}else{m.width(n)}}},datetimebox:{init:function(m,o){var n=c('<input type="text" class="easyui-datetimebox">').appendTo(m);o=o||{};o=c.extend({},o,{formatter:function(p){return c.dateFormat(new Date(p),"yyyy-MM-dd hh:mm")}});return n.datetimebox(o)},getValue:function(m){return c(m).datetimebox("getValue")},setValue:function(n,m){c(n).datetimebox("setValue",m)},resize:function(n,m){c(n).datetimebox("resize",m)}},numberspinner:{init:function(m,o){var n=c('<input type="text">').appendTo(m);o=o||{};o=c.extend({},o,{min:0,editable:false});return n.numberspinner(o)},getValue:function(m){return c(m).numberspinner("getValue")},setValue:function(n,m){c(n).numberspinner("setValue",m)},resize:function(n,m){c(n).numberspinner("resize",m)}},timespinner:{init:function(m,o){var n=c('<input type="text">').appendTo(m);o=o||{};return n.timespinner(o)},getValue:function(m){return c(m).timespinner("getValue")},setValue:function(n,m){c(n).timespinner("setValue",m)},resize:function(n,m){c(n).timespinner("resize",m)}},combogrid:{init:function(m,o){var n=c('<input type="text">').appendTo(m);o=o||{};o=c.extend({},o,{panelWidth:400,editable:false});return n.combogrid(o)},getValue:function(m){return c(m).combogrid("getValue")},setValue:function(n,m){c(n).combogrid("setValue",m)},resize:function(n,m){c(n).combogrid("resize",m)}}});c.fn.datagrid.defaults.customAttr={headerContextMenu:{isShow:false,isMerge:true,items:[]},rowContextMenu:{isShow:false,isMerge:true,items:[]},pagination:{showPageList:false,showRefresh:true,beforePageText:undefined,afterPageText:undefined,displayMsg:undefined},slaveList:undefined,activeSlave:"dblclickrow",rowediting:true,tooltip:{enable:true,target:"row",position:"bottom",fields:undefined,formatter:undefined}};c.extend(c.fn.datagrid.methods,{followCustomHandle:function(m){return m.each(function(){var n=c.extend(true,{},c.fn.datagrid.defaults,c(this).datagrid("options"));h(this,n);l(this,n);if(c(this).datagrid("options").pagination){c(this).datagrid("setPagination",c(this).datagrid("options").pagination)}k(this,n);b(this,n);g(this,n)})},getHeaderContextMenu:function(m){return c("#"+d(m[0],"headerContextMenu"))},getRowContextMenu:function(m){return c("#"+d(m[0],"rowContextMenu"))},getEditingRow:function(q){var m=c.data(q[0],"datagrid");var o=m.options;var p=m.data;var n=[];o.finder.getTr(q[0],"","allbody").each(function(){if(c(this).hasClass("datagrid-row-editing")){var r=parseInt(c(this).attr("datagrid-row-index"));n.push(p.rows[r])}});return n.length>0?n[0]:null},setPagination:function(n,m){return n.each(function(){c(this).datagrid("getPager").pagination(m)})},deleteRows:function(n,m){return n.each(function(){var p=undefined;if(!c.isArray(m)){p=[m]}else{p=m}var o=this;c.each(p,function(r,s){if(c.isPlainObject(s)){var q=c(o).datagrid("getRowIndex",s);c(o).datagrid("deleteRow",q)}else{c(o).datagrid("deleteRow",s)}})})}})})(jQuery);(function(a){a.extend({dateFormat:function(c,k){if(c==null){return null}if(k==null){var p="yyyy-MM-dd"}else{var p=k}var l=c.getFullYear().toString();var j=(c.getMonth()+1).toString();var m=c.getDate().toString();var n=c.getHours().toString();var e=c.getMinutes().toString();var o=c.getSeconds().toString();var d=p.replace(/[^y]/g,"");var q=p.replace(/[^M]/g,"");var b=p.replace(/[^d]/g,"");var g=p.replace(/[^h]/g,"");var f=p.replace(/[^m]/g,"");var h=p.replace(/[^s]/g,"");if(d.length==2){l=l.substring(2,4)}if(q.length>1&&j.length==1){j="0"+j}if(b.length>1&&m.length==1){m="0"+m}if(g.length>1&&n.length==1){n="0"+n}if(f.length>1&&e.length==1){e="0"+e}if(h.length>1&&o.length==1){o="0"+o}if(d.length>0){p=p.replace(d,l)}if(q.length>0){p=p.replace(q,j)}if(b.length>0){p=p.replace(b,m)}if(g.length>0){p=p.replace(g,n)}if(f.length>0){p=p.replace(f,e)}if(h.length>0){p=p.replace(h,o)}return p},parseDate:function(u,p){var t=new Date();if(u==null){return t}if(p==null){var m="yyyy-MM-dd"}else{var m=p}var w=m.replace(/[^y]/g,"");var l=m.replace(/[^M]/g,"");var h=m.replace(/[^d]/g,"");var x=m.replace(/[^h]/g,"");var d=m.replace(/[^m]/g,"");var f=m.replace(/[^s]/g,"");var j=m.indexOf(w);var q=w.length;var e=parseInt(u.substring(j,j+q));if(isNaN(e)){e=t.getYear()}else{if(q==2){if(e<50){e+=2000}else{e+=1900}}}var y=m.indexOf(l);var v=parseInt(u.substring(y,y+l.length));if(isNaN(v)){v=t.getMonth()}else{v-=1}var b=m.indexOf(h);var n=parseInt(u.substring(b,b+h.length));if(isNaN(n)){n=t.getDate()}var s=m.indexOf(x);var o=parseInt(u.substring(s,s+x.length));if(isNaN(o)){o=0}var c=m.indexOf(d);var k=parseInt(u.substring(c,c+d.length));if(isNaN(k)){k=0}var r=m.indexOf(f);var g=parseInt(u.substring(r,r+f.length));if(isNaN(g)){g=0}return new Date(e,v,n,o,k,g)}})})(jQuery);(function(b){function a(e,d,c){if(d&&b.isArray(d)){b.each(d,function(){var h=this;var g={};if(c){b.extend(g,{parent:c})}if(b.isPlainObject(h)){b(e).menu("appendItem",b.extend(h,g));if(h.submenu){var j=b(e).menu("findItem",h.text);a(e,h.submenu,j.target)}}else{if(h=="-"){var f=b(e).menu("appendItem",b.extend({text:h},g)).menu("findItem",h).target;b(f).removeClass("menu-item").addClass("menu-sep").removeAttr("style").empty()}}})}}b.extend(b.fn.menu.methods,{followCustomHandle:function(c){},appendItems:function(d,c){return d.each(function(){a(this,c)})}})})(jQuery);(function(e){function f(n){return e(n).attr("id")+"_contextmenu"}function g(p,q){var o=f(p);var n=e("#"+o);if(n.length==0){n=e("<div>",{id:o}).menu();n.menu("appendItems",q)}return n}function l(o){var n={};e.each(o,function(){var q=this;if(q.onclick){var p=q.id||q.text;n[p]=q.onclick;delete q.onclick}if(q.submenu&&e.isArray(q.submenu)&&q.submenu.length>0){e.extend(n,l(q.submenu))}});return n}function m(r){var o=e.extend(true,{},e.fn.tabs.defaults,e.data(r,"tabs").options);var n=o.customAttr.contextMenu;if(!n.isShow){return}var s=k(r);if(n.isMerge&&e.isArray(n.items)&&n.items.length>0){s=e.merge(s,n.items)}if(!n.isMerge&&e.isArray(n.items)&&n.items.length>0){s=n.items}var q=l(s);var p=g(r,s);e(r).tabs({onContextMenu:function(u,v,t){u.preventDefault();h(r,p,t);p.menu({onClick:function(x){var w=x.id||x.text;if(q[w]){q[w].call(this,x,v,t,r)}}}).menu("show",{left:u.pageX,top:u.pageY})}})}function h(r,p,n){var q=f(r);var o=e("#"+q+"_fixed");if(e.inArray(n,e.fn.tabs.defaults.customAttr.fixedtabs)==-1&&!e(r).tabs("getTab",n).panel("options").closable){p.menu("setText",{target:o,text:e.fn.tabs.defaults.contextMenu.itemname.unfixtab})}else{p.menu("setText",{target:o,text:e.fn.tabs.defaults.contextMenu.itemname.fixtab});if(e.inArray(n,e.fn.tabs.defaults.customAttr.fixedtabs)>-1){p.menu("disableItem",o)}else{p.menu("enableItem",o)}}o=e("#"+q+"_close");if(!e(r).tabs("getTab",n).panel("options").closable){p.menu("disableItem",o)}else{p.menu("enableItem",o)}}function k(o){var n=f(o);return[{id:n+"_reload",text:e.fn.tabs.defaults.contextMenu.itemname.reload,onclick:e.fn.tabs.defaults.contextMenu.defaultEventsHandler.reload},{id:n+"_fixed",text:e.fn.tabs.defaults.contextMenu.itemname.fixtab,onclick:function(r,s,p,q){if(r.text==e.fn.tabs.defaults.contextMenu.itemname.fixtab){e.fn.tabs.defaults.contextMenu.defaultEventsHandler.fixtab(r,s,p,q)}else{e.fn.tabs.defaults.contextMenu.defaultEventsHandler.unfixtab(r,s,p,q)}}},"-",{id:n+"_close",text:e.fn.tabs.defaults.contextMenu.itemname.close,onclick:e.fn.tabs.defaults.contextMenu.defaultEventsHandler.closetab},{id:n+"_close_others",text:e.fn.tabs.defaults.contextMenu.itemname.closeothers,onclick:e.fn.tabs.defaults.contextMenu.defaultEventsHandler.closeOthersTab},{id:n+"_close_rightside",text:e.fn.tabs.defaults.contextMenu.itemname.closerightside,onclick:e.fn.tabs.defaults.contextMenu.defaultEventsHandler.closeRightSideTabs},{id:n+"_close_all",text:e.fn.tabs.defaults.contextMenu.itemname.closeall,onclick:e.fn.tabs.defaults.contextMenu.defaultEventsHandler.closeAll}]}function a(o,n){var p=[];n++;e(o).children("div.tabs-header").find("ul li:nth-child("+n+")").each(function(){p.push(this)});return p.length>0?p[0]:null}function b(t,q,n,u){if(typeof n=="number"&&typeof q=="number"){var v=e.data(t,"tabs").tabs;if(n<0||n>v.length){return}if(q<0||q>v.length){return}if(u){var x=v[n];for(var p=n;p>q;p--){v.splice(p,1,v[p-1])}v[q]=x;var w=a(t,q);if(w){var s=a(t,n);e(w).before(s)}}else{var x=v[q];for(var o=q;o<=n;o++){v.splice(o,1,v[o+1])}v[n]=x;var w=a(t,n);if(w){var r=a(t,q);e(w).after(r)}}}}function d(q){var o=e(q).tabs("tabs");var r=[];for(var n=0;n<o.length;n++){var p=o[n];if(p.panel("options").closable==undefined||!p.panel("options").closable){r.push(p)}}return r}function c(r,o){var s=/^url:/.test(o.content);var n=o.href||"#";if(s){n=o.content.substr(4,o.content.length)}var q=e("<iframe>").attr("height","98%").attr("width","100%").attr("marginheight","0").attr("marginwidth","0").attr("frameborder","0");setTimeout(function(){q.attr("src",n)},1);var p=e(r).tabs("getTab",o.title);p.panel("body").empty().append(q)}e.fn.tabs.defaults.contextMenu={};e.fn.tabs.defaults.contextMenu.itemname={};e.fn.tabs.defaults.contextMenu.itemname.reload="重新加载";e.fn.tabs.defaults.contextMenu.itemname.fixtab="固定标签页";e.fn.tabs.defaults.contextMenu.itemname.unfixtab="取消固定标签";e.fn.tabs.defaults.contextMenu.itemname.close="关闭标签页";e.fn.tabs.defaults.contextMenu.itemname.closeothers="关闭其他标签页";e.fn.tabs.defaults.contextMenu.itemname.closerightside="关闭右侧标签页";e.fn.tabs.defaults.contextMenu.itemname.closeall="关闭所有标签页";e.fn.tabs.defaults.contextMenu.defaultEventsHandler={reload:function(o,q,n,p){e(p).tabs("getTab",n).panel("refresh")},fixtab:function(q,s,o,r){var p=e(r).tabs("getTab",o);e(r).tabs("update",{tab:p,options:{closable:false}});var n=e.fn.tabs.defaults.customAttr.fixedtabs.length;b(r,n,o,true)},unfixtab:function(q,s,n,r){var o=d(r).length-1;var p=e(r).tabs("getTab",n);e(r).tabs("update",{tab:p,options:{closable:true}});b(r,n,o)},closetab:function(p,r,o,q){var n=e(q).tabs("getTab",o).panel("options");if(n.closable){e(q).tabs("close",o)}},closeOthersTab:function(r,q,o,s){var p=e(s).tabs("tabs");var n=e.grep(p,function(u,t){return u.panel("options").closable&&t!=o});e.each(n,function(){e(s).tabs("close",this.panel("options").title)})},closeRightSideTabs:function(q,s,o,r){var p=e(r).tabs("tabs");var n=e.grep(p,function(u,t){return t>o&&u.panel("options").closable});e.each(n,function(){e(r).tabs("close",this.panel("options").title)})},closeAll:function(q,s,o,r){var p=e(r).tabs("tabs");var n=e.grep(p,function(u,t){return u.panel("options").closable});e.each(n,function(){e(r).tabs("close",this.panel("options").title)})}};e.fn.tabs.defaults.customAttr={fixedtabs:[0],contextMenu:{isShow:false,isMerge:true,items:[]}};var j=e.extend({},e.fn.tabs.methods);e.extend(e.fn.tabs.methods,{followCustomHandle:function(n){return n.each(function(){m(this)})},add:function(o,n){return o.each(function(){var p={};if(n.href&&n.useiframe){p[href]=n.href;delete n.href}j.add(o,n);if(n.useiframe){c(this,e.extend({},n,p))}})}})})(jQuery);(function(a){a.extend(a.fn.validatebox.defaults.rules,{unequal:{validator:function(b,c){return b!=c},message:a.fn.validatebox.defaults.missingMessage},minLength:{validator:function(b,c){return b.length>=c[0]}},equals:{validator:function(b,c){if(/^#/.test(c)){return b==a(c).val()}else{return b==c}}}});if(a.fn.validatebox){a.fn.validatebox.defaults.rules.minLength.message="请至少输入{0}个字符。";a.fn.validatebox.defaults.rules.equals.message="字段不匹配"}})(jQuery);(function(b){function a(c,d){var g;try{g=c.top.document;g.getElementsByTagName}catch(f){return c}if(d.locate=="document"||g.getElementsByTagName("frameset").length>0){return c}return c.top}b.extend({showWindow:function(n){console.log("====> showWindow.");n=n||{};var j;var h=b.extend({},{iconCls:"icon-form",useiframe:false,locate:"top",data:undefined,width:500,height:400,minimizable:true,maximizable:true,collapsible:true,resizable:true,onClose:function(){j.panel("destroy")}},n);var f={getData:function(o){return h.data?h.data[o]:null},close:function(){j.panel("close")}};if(/^url:/.test(h.content)){var c=h.content.substr(4,h.content.length);if(h.useiframe){var d=b("<iframe>").attr("height","98%").attr("width","100%").attr("marginheight",0).attr("marginwidth",0).attr("frameborder",0);setTimeout(function(){d.attr("src",c)},10)}else{h.href=c;var k=h.onLoad;h.onLoad=function(){k&&k()}}delete h.content}var e=function(o){if(typeof o=="function"){return function(){o(f)}}if(typeof o=="string"&&h.useiframe){return function(){d[0].contentWindow[o](f)}}};if(h.toolbar&&b.isArray(h.toolbar)){b.each(h.toolbar,function(p,o){o.handler=e(o.handler)})}if(h.buttons&&b.isArray(h.buttons)){b.each(h.buttons,function(p,o){o.handler=e(o.handler)})}if(h.locate=="top"||h.locate=="document"){var l=a(window,h);if(h.useiframe&&d){var g=this;d.bind("load",function(){g.body=d[0].contentWindow;h.onLoad&&h.onLoad.call(g,f)});j=l.$("<div>").append(d).dialog(h)}else{j=l.$("<div>").dialog(h)}}else{var m=/^#/.test(h.locate)?h.locate:"#"+h.locate;j=b("<div>").appendTo(m).dialog(b.extend({},h,{inline:true}))}},showModalDialog:function(c){console.log("===>showModalDialog");c=c||{};var d=b.extend({},c,{modal:true,minimizable:false,maximizable:false,resizable:false,collapsible:false});b.showWindow(d)}})})(jQuery);